# 12 Занятие - Ract JS

## React Router

Для маршрутизации React приложения зачастую используется [react router](https://reacttraining.com/react-router/web/guides/quick-start).

Важные объекты, для определения маршрутов:

- `Router`
- `Route`
- `Switch`

### Router

`Router` определяет набор маршрутов. В момент когда к приложению, приходит запрос, выполняет сопоставление запроса с маршрутами. Если маршрут совпадает с URL запроса, то этот маршрут выбирается для обработки запроса.

Для браузерных проектов используются `BrowserRouter` или `HashRouter` компоненты.

Используйте:

- `BrowserRouter` при рендере динамического контента, приходящего с сервера.
- `HashRouter` при разработке статического веб сайта.

```js
import { BrowserRouter } from 'react-router-dom';

ReactDOM.render((
  <BrowserRouter>
    <App />
  </BrowserRouter>
), document.getElementById('root'))
```

### Route

`Route` представляет маршрут или простыми словами – что должно рендерится на определенный URL.

```js
import { BrowserRouter, Route } from 'react-router-dom';
import { User, Home } from 'components';

ReactDOM.render((
  <BrowserRouter>
    <Route exact path='/' component={Home} />
    <Route path='/user' component={User} />
  </BrowserRouter>
), document.getElementById('root'))
```

Атрибут `exact` позволяет установить строгое сравнение. Без него, путь который начинается с `/` всегда бы соответствовал маршруту с шаблоном `/`.

### Switch

`Switch` позволяет выбрать первый попавшийся маршрут и использовать для обработки.

```js
import { BrowserRouter, Route } from 'react-router-dom';
import { User, Home } from 'components';

ReactDOM.render((
  <BrowserRouter>
    <Switch>
      <Route exact path='/' component={Home} />
      <Route path='/user' component={User} />
    </Switch>
  </BrowserRouter>
), document.getElementById('root'))
```

## Flux

Flux – подход к управлению состоянием. Основная цель – сделать предсказуемое управление состоянием.

Все данные передаются в одном направлении, что и позволяет достигать предсказуемости.

```txt
                               +--------+
                    +----------+ Action +<-----+
                    |          +--------+      |
                    |                          |
                    v                          |
+--------+    +-----+------+   +-------+   +---+--+
| Action +--->+ Dispatcher +-->+ Store +-->+ View |
+--------+    +------------+   +-------+   +------+
```

`Actions` представляют собой способы взаимодействия пользователей с приложением. Описывают что должно произойти.

```js
{
  type: 'ADD_ITEM',  // Описание того что должно произойти
  item: {...},
};
```

`Dispatcher` получает действие `action` и отправляет его в `store`.

`Store` — это структуры, в которых хранится состояние приложения, а также логика обновления этого состояния. Приложение может иметь несколько `stores`, каждый из которых отвечает за свою часть состояния приложения. 

`View` - то что видит и с чем взаимодействует пользователь.

Пример работы – Пользователь нажимает на кнопку, предположим кнопку '+'. Это вызывает `action` с типом `ADD_ITEM` диспатчеру. `Dispatcher` получает `action` и отправляет в каждый `store`. `Stores` проверяют свою внутреннюю логику, чтобы узнать, отвечают ли они на действия `ADD_ITEM`. Если `stores` отвечают, они вносят некоторые изменения в свое внутреннее состояние, а затем генерируют событие изменения, которое заставит соответствующие `views` впоследствии повторно выполнить рендеринг, отображая обновленное состояние.

## Redux

[Redux](https://redux.js.org/) - библиотека для управления состоянием, реализующая архитектуру `flux`.

```txt
                  +---------+
      +-----------+ Actions +<----------+
      |           +---------+           |
      |                                 |
      v                                 |
+-----+------+     +-------+     +------+----+
| Reducer(s) +---->+ Store +---->+ Component |
+------------+     +-------+     +-----------+

```

Отличия в реализации архитектуры:

- Нет `dispatcher`'a, т.к в redux одно хранилище.
- Состояние приложения содержится в централизованном хранилище (`store`).
- `Reducer`. Чистые функции которые в качестве аргументов принимают текущее состояние (`state`) и действие (`action`), возвращают либо не измененное сосотяние, либо его новую копию.
